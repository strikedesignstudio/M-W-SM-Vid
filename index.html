<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MP4 to ASCII Art</title>
    <style>
        body { background-color: black; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; }
        pre { font-family: monospace; line-height: 80%; }
        video { display: none; }
    </style>
</head>
<body>
    <video id="video" src="video.mp4" autoplay loop muted></video>
    <pre id="ascii"></pre>

    <script>
        const video = document.getElementById('video');
        const asciiOutput = document.getElementById('ascii');

        const asciiChars = ['W', '&', 'M'];
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas dimensions
        const scale = 0.1; // Adjust this to control ASCII art size
        const fontRatio = 2; // Adjust character height ratio
        let width, height;

        video.addEventListener('play', () => {
            width = video.videoWidth * scale;
            height = (video.videoHeight * scale) / fontRatio;
            canvas.width = width;
            canvas.height = height;

            renderASCII();
        });

        // Convert a single frame to ASCII
        function renderFrameToASCII() {
            ctx.drawImage(video, 0, 0, width, height);
            const imageData = ctx.getImageData(0, 0, width, height);
            let asciiArt = '';

            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const index = (y * width + x) * 4;
                    const r = imageData.data[index];
                    const g = imageData.data[index + 1];
                    const b = imageData.data[index + 2];

                    // Calculate brightness (0 = black, 255 = white)
                    const brightness = (r + g + b) / 3;
                    
                    // Map brightness to ASCII character
                    const charIndex = Math.floor((brightness / 256) * asciiChars.length);
                    asciiArt += asciiChars[charIndex];
                }
                asciiArt += '\n';
            }
            return asciiArt;
        }

        // Continuously render ASCII art
        function renderASCII() {
            if (video.paused || video.ended) return;

            asciiOutput.textContent = renderFrameToASCII();
            requestAnimationFrame(renderASCII);
        }
    </script>
</body>
</html>

